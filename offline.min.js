(function(){var n,e,t,i,o,r;i=function(n,e){var t,i,o;for(t in i=[],e.prototype)try{o=e.prototype[t],null==n[t]&&"function"!=typeof o?i.push(n[t]=o):i.push(void 0)}catch(n){}return i},(n={}).options=window.Offline&&window.Offline.options||{},t={checks:{xhr:{url:function(){return"/favicon.ico?_="+(new Date).getTime()},timeout:5e3,type:"HEAD"},image:{url:function(){return"/favicon.ico?_="+(new Date).getTime()}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0,deDupBody:!1},o=function(n,e){var t,i,o,r,u;for(t=n,i=o=0,r=(u=e.split(".")).length;o<r&&"object"==typeof(t=t[u[i]]);i=++o);return i===u.length-1?t:void 0},n.getOption=function(e){var i,r;return"function"==typeof(r=null!=(i=o(n.options,e))?i:o(t,e))?r():r},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(n.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return n.confirmDown()},!1),n.state="up",n.markUp=function(){if(n.trigger("confirmed-up"),"up"!==n.state)return n.state="up",n.trigger("up")},n.markDown=function(){if(n.trigger("confirmed-down"),"down"!==n.state)return n.state="down",n.trigger("down")},r={},n.on=function(e,t,i){var o,u,f,c,l;if((u=e.split(" ")).length>1){for(l=[],f=0,c=u.length;f<c;f++)o=u[f],l.push(n.on(o,t,i));return l}return null==r[e]&&(r[e]=[]),r[e].push([i,t])},n.off=function(n,e){var t,i,o;if(null!=r[n]){if(e){for(t=0,o=[];t<r[n].length;)(i=r[n][t])[0],i[1]===e?o.push(r[n].splice(t,1)):o.push(t++);return o}return r[n]=[]}},n.trigger=function(n){var e,t,i,o,u,f,c;if(null!=r[n]){for(c=[],i=0,o=(u=r[n].slice(0)).length;i<o;i++)e=(f=u[i])[0],t=f[1],c.push(t.call(e));return c}},e=function(n,e,t){var i,o,r,u,f;return f=function(){return n.status&&n.status<12e3?e():t()},null===n.onprogress?(i=n.onerror,n.onerror=function(){return t(),"function"==typeof i?i.apply(null,arguments):void 0},u=n.ontimeout,n.ontimeout=function(){return t(),"function"==typeof u?u.apply(null,arguments):void 0},o=n.onload,n.onload=function(){return f(),"function"==typeof o?o.apply(null,arguments):void 0}):(r=n.onreadystatechange,n.onreadystatechange=function(){return 4===n.readyState?f():0===n.readyState&&t(),"function"==typeof r?r.apply(null,arguments):void 0})},n.checks={},n.checks.xhr=function(){var t;(t=new XMLHttpRequest).offline=!1,t.open(n.getOption("checks.xhr.type"),n.getOption("checks.xhr.url"),!0),null!=t.timeout&&(t.timeout=n.getOption("checks.xhr.timeout")),e(t,n.markUp,n.markDown);try{t.send()}catch(e){n.markDown()}return t},n.checks.image=function(){var e;(e=document.createElement("img")).onerror=n.markDown,e.onload=n.markUp,e.src=n.getOption("checks.image.url")},n.checks.down=n.markDown,n.checks.up=n.markUp,n.check=function(){return n.trigger("checking"),n.checks[n.getOption("checks.active")]()},n.confirmUp=n.confirmDown=n.check,n.onXHR=function(n){var e,t,o;if(o=function(e,t){var i;return i=e.open,e.open=function(o,r,u,f,c){return n({type:o,url:r,async:u,flags:t,user:f,password:c,xhr:e}),i.apply(e,arguments)}},t=window.XMLHttpRequest,window.XMLHttpRequest=function(n){var e,i,r;return r=new t(n),o(r,n),i=r.setRequestHeader,r.headers={},r.setRequestHeader=function(n,e){return r.headers[n]=e,i.call(r,n,e)},e=r.overrideMimeType,r.overrideMimeType=function(n){return r.mimeType=n,e.call(r,n)},r},i(window.XMLHttpRequest,t),null!=window.XDomainRequest)return e=window.XDomainRequest,window.XDomainRequest=function(){var n;return n=new e,o(n),n},i(window.XDomainRequest,e)},setTimeout(function(){if(n.getOption("interceptRequests")&&n.onXHR(function(t){var i;if(!1!==(i=t.xhr).offline)return e(i,n.markUp,n.confirmDown)}),n.getOption("checkOnLoad"))return n.check()},0),window.Offline=n}).call(this),function(){var n,e,t,i,o,r,u,f,c;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");i=Offline.reconnect={},r=null,o=function(){var n;return null!=i.state&&"inactive"!==i.state&&Offline.trigger("reconnect:stopped"),i.state="inactive",i.remaining=i.delay=null!=(n=Offline.getOption("reconnect.initialDelay"))?n:3},e=function(){var n,e;return n=null!=(e=Offline.getOption("reconnect.delay"))?e:Math.min(Math.ceil(1.5*i.delay),3600),i.remaining=i.delay=n},u=function(){if("connecting"!==i.state)return i.remaining-=1,Offline.trigger("reconnect:tick"),0===i.remaining?f():void 0},f=function(){if("waiting"===i.state)return Offline.trigger("reconnect:connecting"),i.state="connecting",Offline.check()},n=function(){if(Offline.getOption("reconnect"))return o(),i.state="waiting",Offline.trigger("reconnect:started"),r=setInterval(u,1e3)},c=function(){return null!=r&&clearInterval(r),o()},t=function(){if(Offline.getOption("reconnect"))return"connecting"===i.state?(Offline.trigger("reconnect:failure"),i.state="waiting",e()):void 0},i.tryNow=f,o(),Offline.on("down",n),Offline.on("confirmed-down",t),Offline.on("up",c)}.call(this),function(){var n,e,t,i,o,r;if(!window.Offline)throw new Error("Requests module brought in without offline.js");t=[],r=!1,i=function(n){if(!1!==Offline.getOption("requests"))return Offline.trigger("requests:capture"),"down"!==Offline.state&&(r=!0),t.push(n)},o=function(n){var e,t,i,o,r,u,f,c,l;if(l=n.xhr,u=n.url,r=n.type,f=n.user,i=n.password,e=n.body,!1!==Offline.getOption("requests")){for(t in l.abort(),l.open(r,u,!0,f,i),o=l.headers)c=o[t],l.setRequestHeader(t,c);return l.mimeType&&l.overrideMimeType(l.mimeType),l.send(e)}},n=function(){return t=[]},e=function(){var e,i,r,u,f,c,l;if(!1!==Offline.getOption("requests")){for(Offline.trigger("requests:flush"),c={},i=0,u=t.length;i<u;i++)l=(f=t[i]).url.replace(/(\?|&)_=[0-9]+/,function(n,e){return"?"===e?e:""}),Offline.getOption("deDupBody")?(e="[object Object]"===(e=f.body).toString()?JSON.stringify(e):e.toString(),c[f.type.toUpperCase()+" - "+l+" - "+e]=f):c[f.type.toUpperCase()+" - "+l]=f;for(r in c)f=c[r],o(f);return n()}},getRequestsCount=function(){return t.length},setTimeout(function(){if(!1!==Offline.getOption("requests"))return Offline.on("confirmed-up",function(){if(r)return r=!1,n()}),Offline.on("up",e),Offline.on("down",function(){return r=!1}),Offline.onXHR(function(n){var e,t,o,r,u;if(u=n.xhr,o=n.async,!1!==u.offline&&(r=function(){return i(n)},t=u.send,u.send=function(e){return n.body=e,t.apply(u,arguments)},o))return null===u.onprogress?(u.addEventListener("error",r,!1),u.addEventListener("timeout",r,!1)):(e=u.onreadystatechange,u.onreadystatechange=function(){return 0===u.readyState?r():4===u.readyState&&(0===u.status||u.status>=12e3)&&r(),"function"==typeof e?e.apply(null,arguments):void 0})}),Offline.requests={flush:e,clear:n,getRequestsCount:getRequestsCount}},0)}.call(this),function(){var n,e,t,i,o,r;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(e=0,t=(i=["up","down"]).length;e<t;e++){r=i[e];try{o=document.querySelector("script[data-simulate='"+r+"']")||("undefined"!=typeof localStorage&&null!==localStorage?localStorage.OFFLINE_SIMULATE:void 0)===r}catch(n){o=!1}}o&&(null==Offline.options&&(Offline.options={}),null==(n=Offline.options).checks&&(n.checks={}),Offline.options.checks.active=r)}.call(this),function(){var n,e,t,i,o,r,u,f,c,l,a;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");i=function(n){var e;return(e=document.createElement("div")).innerHTML=n,e.children[0]},o=t=null,e=function(n){return c(n),o.className+=" "+n},c=function(n){return o.className=o.className.replace(new RegExp("(^| )"+n.split(" ").join("|")+"( |$)","gi")," ")},u={},r=function(n,t){return e(n),null!=u[n]&&clearTimeout(u[n]),u[n]=setTimeout(function(){return c(n),delete u[n]},1e3*t)},a=function(n){var e,t,i;for(t in i={day:86400,hour:3600,minute:60,second:1})if(n>=(e=i[t]))return[Math.floor(n/e),t];return["now",""]},l=function(){var n,r;return o=i('<div class="offline-ui"><div class="offline-ui-content"></div></div>'),document.body.appendChild(o),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(o.appendChild(i('<a href class="offline-ui-retry"></a>')),r=function(n){return n.preventDefault(),Offline.reconnect.tryNow()},null!=(n=o.querySelector(".offline-ui-retry")).addEventListener?n.addEventListener("click",r,!1):n.attachEvent("click",r)),e("offline-ui-"+Offline.state),t=o.querySelector(".offline-ui-content")},f=function(){return l(),Offline.on("up",function(){return c("offline-ui-down"),e("offline-ui-up"),r("offline-ui-up-2s",2),r("offline-ui-up-5s",5)}),Offline.on("down",function(){return c("offline-ui-up"),e("offline-ui-down"),r("offline-ui-down-2s",2),r("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return e("offline-ui-connecting"),c("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var n,i,o;return e("offline-ui-waiting"),c("offline-ui-connecting"),i=(n=a(Offline.reconnect.remaining))[0],o=n[1],t.setAttribute("data-retry-in-value",i),t.setAttribute("data-retry-in-unit",o)}),Offline.on("reconnect:stopped",function(){return c("offline-ui-connecting offline-ui-waiting"),t.setAttribute("data-retry-in-value",null),t.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return r("offline-ui-reconnect-failed-2s",2),r("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return r("offline-ui-reconnect-succeeded-2s",2),r("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?f():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",f,!1):(n=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&f(),"function"==typeof n?n.apply(null,arguments):void 0})}.call(this);