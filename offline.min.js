/*! offline-js 0.7.18 */
(function(){var a,b,c,d,e,f,g;d=function(a,b){var c,d,e,f;e=[];for(d in b.prototype)try{f=b.prototype[d],null==a[d]&&"function"!=typeof f?e.push(a[d]=f):e.push(void 0)}catch(g){c=g}return e},a={},a.options=window.Offline?window.Offline.options||{}:{},c={checks:{xhr:{url:function(){return"/favicon.ico?_="+(new Date).getTime()},timeout:5e3,type:"HEAD"},image:{url:function(){return"/favicon.ico?_="+(new Date).getTime()}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0,deDupBody:!1,unauthorized:!1,signIn:"/",modal:!1},e=function(a,b){var c,d,e,f,g,h;for(c=a,h=b.split("."),d=e=0,f=h.length;e<f&&(g=h[d],c=c[g],"object"==typeof c);d=++e);return d===h.length-1?c:void 0},a.getOption=function(b){var d,f;return f=null!=(d=e(a.options,b))?d:e(c,b),"function"==typeof f?f():f},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(a.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return a.confirmDown()},!1),a.state="up",a.markUp=function(){if(a.trigger("confirmed-up"),"up"!==a.state)return a.state="up",a.trigger("up")},a.markDown=function(){if(a.trigger("confirmed-down"),"down"!==a.state)return a.state="down",a.trigger("down")},a.markUnauthorized=function(){if(a.trigger("confirmed-unauthorized"),"unauthorized"!==a.state)return a.state="unauthorized",a.trigger("unauthorized")},f={},a.on=function(b,c,d){var e,g,h,i,j;if(g=b.split(" "),g.length>1){for(j=[],h=0,i=g.length;h<i;h++)e=g[h],j.push(a.on(e,c,d));return j}return null==f[b]&&(f[b]=[]),f[b].push([d,c])},a.off=function(a,b){var c,d,e,g,h;if(null!=f[a]){if(b){for(e=0,h=[];e<f[a].length;)g=f[a][e],d=g[0],c=g[1],c===b?h.push(f[a].splice(e,1)):h.push(e++);return h}return f[a]=[]}},a.trigger=function(a){var b,c,d,e,g,h,i;if(null!=f[a]){for(g=f[a].slice(0),i=[],d=0,e=g.length;d<e;d++)h=g[d],b=h[0],c=h[1],i.push(c.call(b));return i}},b=function(b,c,d,e){var f,g,h,i,j;return j=function(){return b.status&&b.status<12e3?a.getOption("unauthorized")&&401===b.status?e():c():d()},null===b.onprogress?(f=b.onerror,b.onerror=function(){return d(),"function"==typeof f?f.apply(null,arguments):void 0},i=b.ontimeout,b.ontimeout=function(){return d(),"function"==typeof i?i.apply(null,arguments):void 0},g=b.onload,b.onload=function(){return j(),"function"==typeof g?g.apply(null,arguments):void 0}):(h=b.onreadystatechange,b.onreadystatechange=function(){return 4===b.readyState?j():0===b.readyState&&d(),"function"==typeof h?h.apply(null,arguments):void 0})},a.checks={},a.checks.xhr=function(){var c,d;d=new XMLHttpRequest,d.offline=!1,d.open(a.getOption("checks.xhr.type"),a.getOption("checks.xhr.url"),!0),null!=d.timeout&&(d.timeout=a.getOption("checks.xhr.timeout")),b(d,a.markUp,a.markDown,a.markUnauthorized);try{d.send()}catch(e){c=e,a.markDown()}return d},a.checks.image=function(){var b;b=document.createElement("img"),b.onerror=a.markDown,b.onload=a.markUp,b.src=a.getOption("checks.image.url")},a.checks.down=a.markDown,a.checks.up=a.markUp,a.check=function(){return a.trigger("checking"),a.checks[a.getOption("checks.active")]()},a.confirmUp=a.confirmDown=a.confirmUnauthorized=a.check,a.onXHR=function(a){var b,c,e;if(e=function(b,c){var d;return d=b.open,b.open=function(e,f,g,h,i){return a({type:e,url:f,async:g,flags:c,user:h,password:i,xhr:b}),d.apply(b,arguments)}},c=window.XMLHttpRequest,window.XMLHttpRequest=function(a){var b,d,f;return f=new c(a),e(f,a),d=f.setRequestHeader,f.headers={},f.setRequestHeader=function(a,b){return f.headers[a]=b,d.call(f,a,b)},b=f.overrideMimeType,f.overrideMimeType=function(a){return f.mimeType=a,b.call(f,a)},f},d(window.XMLHttpRequest,c),null!=window.XDomainRequest)return b=window.XDomainRequest,window.XDomainRequest=function(){var a;return a=new b,e(a),a},d(window.XDomainRequest,b)},g=function(){if(a.getOption("interceptRequests")&&a.onXHR(function(c){var d;if(d=c.xhr,d.offline!==!1)return b(d,a.markUp,a.confirmDown,a.confirmUnauthorized)}),a.getOption("checkOnLoad"))return a.check()},setTimeout(g,0),window.Offline=a}).call(this),function(){var a,b,c,d,e,f,g,h,i;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");c=Offline.reconnect={},f=null,e=function(){var a;return null!=c.state&&"inactive"!==c.state&&Offline.trigger("reconnect:stopped"),c.state="inactive",c.remaining=c.delay=null!=(a=Offline.getOption("reconnect.initialDelay"))?a:3},a=function(){var a,b;return a=null!=(b=Offline.getOption("reconnect.delay"))?b:Math.min(Math.ceil(1.5*c.delay),3600),c.remaining=c.delay=a},g=function(){if("connecting"!==c.state)return c.remaining-=1,Offline.trigger("reconnect:tick"),0===c.remaining?h():void 0},h=function(){if("waiting"===c.state)return Offline.trigger("reconnect:connecting"),c.state="connecting",Offline.check()},d=function(){if(Offline.getOption("reconnect"))return e(),c.state="waiting",Offline.trigger("reconnect:started"),f=setInterval(g,1e3)},i=function(){return null!=f&&clearInterval(f),e()},b=function(){if(Offline.getOption("reconnect"))return"connecting"===c.state?(Offline.trigger("reconnect:failure"),c.state="waiting",a()):void 0},c.tryNow=h,e(),Offline.on("down",d),Offline.on("unauthorized",d),Offline.on("confirmed-down",b),Offline.on("confirmed-unauthorized",b),Offline.on("up",i)}.call(this),function(){var a,b,c,d,e,f;if(!window.Offline)throw new Error("Requests module brought in without offline.js");c=[],f=!1,d=function(a){if(Offline.getOption("requests")!==!1)return Offline.trigger("requests:capture"),"down"!==Offline.state&&(f=!0),c.push(a)},e=function(a){var b,c,d,e,f,g,h,i,j;if(j=a.xhr,g=a.url,f=a.type,h=a.user,d=a.password,b=a.body,Offline.getOption("requests")!==!1){j.abort(),j.open(f,g,!0,h,d),e=j.headers;for(c in e)i=e[c],j.setRequestHeader(c,i);return j.mimeType&&j.overrideMimeType(j.mimeType),j.send(b)}},a=function(){return c=[]},b=function(){var b,d,f,g,h,i,j;if(Offline.getOption("requests")!==!1){for(Offline.trigger("requests:flush"),i={},d=0,g=c.length;d<g;d++)h=c[d],j=h.url.replace(/(\?|&)_=[0-9]+/,function(a,b){return"?"===b?b:""}),Offline.getOption("deDupBody")?(b=h.body,b="[object Object]"===b.toString()?JSON.stringify(b):b.toString(),i[h.type.toUpperCase()+" - "+j+" - "+b]=h):i[h.type.toUpperCase()+" - "+j]=h;for(f in i)h=i[f],e(h);return a()}},setTimeout(function(){if(Offline.getOption("requests")!==!1)return Offline.on("confirmed-up",function(){if(f)return f=!1,a()}),Offline.on("up",b),Offline.on("down",function(){return f=!1}),Offline.on("unauthorized",function(){return f=!1}),Offline.onXHR(function(a){var b,c,e,f,g;if(g=a.xhr,e=a.async,g.offline!==!1&&(f=function(){return d(a)},c=g.send,g.send=function(b){return a.body=b,c.apply(g,arguments)},e))return null===g.onprogress?(g.addEventListener("error",f,!1),g.addEventListener("timeout",f,!1)):(b=g.onreadystatechange,g.onreadystatechange=function(){return 0===g.readyState?f():4===g.readyState&&(0===g.status||g.status>=12e3)&&f(),"function"==typeof b?b.apply(null,arguments):void 0})}),Offline.requests={flush:b,clear:a}},0)}.call(this),function(){var a,b,c,d,e,f,g;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(e=["up","down"],c=0,d=e.length;c<d;c++){g=e[c];try{f=document.querySelector("script[data-simulate='"+g+"']")||("undefined"!=typeof localStorage&&null!==localStorage?localStorage.OFFLINE_SIMULATE:void 0)===g}catch(h){b=h,f=!1}}f&&(null==Offline.options&&(Offline.options={}),null==(a=Offline.options).checks&&(a.checks={}),Offline.options.checks.active=g)}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");d='<div class="offline-ui"><div class="offline-ui-content"></div></div>',b='<a href class="offline-ui-retry"></a>',c='<a href class="offline-ui-sign-in"></a>',a='<div class="offline-modal">',h=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.children[0]},i=g=m=null,f=function(a){if(n(a),i.className+=" "+a,m)return m.className+=" "+a},n=function(a){if(i.className=i.className.replace(new RegExp("(^| )"+a.split(" ").join("|")+"( |$)","gi")," ").split(/\s+/).join(" "),m)return m.className=m.className.replace(new RegExp("(^| )"+a.split(" ").join("|")+"( |$)","gi")," ").split(/\s+/).join(" ")},k={},j=function(a,b){return f(a),null!=k[a]&&clearTimeout(k[a]),k[a]=setTimeout(function(){return n(a),delete k[a]},1e3*b)},p=function(a){var b,c,d,e;d={day:86400,hour:3600,minute:60,second:1};for(c in d)if(b=d[c],a>=b)return e=Math.floor(a/b),[e,c];return["now",""]},o=function(){var e,j;return i=h(d),document.body.appendChild(i),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(i.appendChild(h(b)),e=i.querySelector(".offline-ui-retry"),j=function(a){return a.preventDefault(),Offline.reconnect.tryNow()},null!=e.addEventListener?e.addEventListener("click",j,!1):e.attachEvent("click",j)),Offline.getOption("signIn")&&(i.appendChild(h(c)),e=i.querySelector(".offline-ui-sign-in"),e.href=Offline.getOption("signIn")),Offline.getOption("modal")&&(m=h(a),document.body.appendChild(m)),f("offline-ui-"+Offline.state),g=i.querySelector(".offline-ui-content")},l=function(){return o(),Offline.on("up",function(){return n("offline-ui-down"),n("offline-ui-unauthorized"),f("offline-ui-up"),j("offline-ui-up-2s",2),j("offline-ui-up-5s",5)}),Offline.on("down",function(){return n("offline-ui-up"),n("offline-ui-unauthorized"),f("offline-ui-down"),j("offline-ui-down-2s",2),j("offline-ui-down-5s",5)}),Offline.on("unauthorized",function(){return n("offline-ui-up"),n("offline-ui-down"),f("offline-ui-unauthorized"),j("offline-ui-unauthorized-2s",2),j("offline-ui-unauthorized-5s",5)}),Offline.on("reconnect:connecting",function(){return f("offline-ui-connecting"),n("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var a,b,c;return f("offline-ui-waiting"),n("offline-ui-connecting"),a=p(Offline.reconnect.remaining),b=a[0],c=a[1],g.setAttribute("data-retry-in-value",b),g.setAttribute("data-retry-in-unit",c)}),Offline.on("reconnect:stopped",function(){return n("offline-ui-connecting offline-ui-waiting"),g.setAttribute("data-retry-in-value",null),g.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return j("offline-ui-reconnect-failed-2s",2),j("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return j("offline-ui-reconnect-succeeded-2s",2),j("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?l():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",l,!1):(e=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&l(),"function"==typeof e?e.apply(null,arguments):void 0})}.call(this);